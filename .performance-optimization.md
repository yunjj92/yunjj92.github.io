# Performance Optimization Guide

## Current Optimizations Implemented

### ‚úÖ Image Optimization
- **Lazy Loading**: Added `loading="lazy"` to all below-the-fold images
- **Async Decoding**: Added `decoding="async"` for better browser performance
- **Explicit Dimensions**: Added width/height attributes to header logo
- **Optimized Images**: Post images and avatar images use lazy loading

### ‚úÖ CSS Optimization
- **External CSS**: Extracted 200+ lines of inline CSS to `/assets/css/homepage-animations.css`
- **Resource Hints**: Added preload for custom CSS files
- **DNS Prefetch**: Configured for external resources (CDN, fonts)

### ‚úÖ Meta Tags & SEO
- **Open Graph**: Comprehensive OG tags already configured
- **Twitter Cards**: Summary cards with images configured
- **Structured Data**: JSON-LD schema markup present
- **Canonical URLs**: Properly configured
- **Meta Tags**: Title, description, keywords all optimized

### ‚úÖ Performance Features
- **Responsive Images**: Using aspect-ratio classes for proper sizing
- **Optimized Liquid**: Limited post queries to 6 items with `slice: 0, 6`
- **Accessibility**: `prefers-reduced-motion` support in animations
- **Resource Preconnect**: Configured for Tailwind CDN

## Production Recommendations

### üéØ Priority: Move to Local Tailwind Build

**Current Issue**: Using Tailwind CDN (blocking render, includes all classes)

**Solution**: Set up local Tailwind build with PurgeCSS

```bash
# Install dependencies
npm install -D tailwindcss@latest postcss@latest autoprefixer@latest

# Create tailwind.config.js
npx tailwindcss init

# Configure purge paths in tailwind.config.js
module.exports = {
  content: [
    './_includes/**/*.html',
    './_layouts/**/*.html',
    './*.html',
    './_posts/**/*.md'
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}

# Build CSS
npx tailwindcss -i ./assets/css/tailwind-input.css -o ./assets/css/tailwind.css --minify
```

**Expected Gains**:
- Reduce CSS from ~3.5MB to ~15-30KB
- Eliminate render-blocking CDN script
- Improve LCP (Largest Contentful Paint) by 30-50%

### üñºÔ∏è Image Format Optimization

**Convert PNG images to WebP with fallbacks**:

```bash
# Install imagemagick or use online converter
magick convert assets/images/brain-circuit.png -quality 80 assets/images/brain-circuit.webp

# Use picture element for fallbacks
<picture>
  <source srcset="/assets/images/brain-circuit.webp" type="image/webp">
  <img src="/assets/images/brain-circuit.png" alt="Logo" loading="lazy">
</picture>
```

**Expected Gains**:
- 25-35% reduction in image file sizes
- Faster LCP for image-heavy pages

### ‚ö° Critical CSS Extraction

Extract above-the-fold CSS and inline it:

```bash
# Use critical package
npm install -D critical

# Extract critical CSS
critical index.html --base _site --inline > _includes/critical-css.html
```

Add to `<head>`:
```html
{% if page.url == "/" %}
  <style>
    {% include critical-css.html %}
  </style>
{% endif %}
```

**Expected Gains**:
- Eliminate render-blocking CSS for first paint
- Improve FCP (First Contentful Paint) by 20-40%

### üóúÔ∏è Asset Compression

**Enable gzip/brotli compression** (if hosting allows):

For GitHub Pages, assets are already compressed. For self-hosting:

```nginx
# nginx configuration
gzip on;
gzip_types text/css application/javascript image/svg+xml;
brotli on;
brotli_types text/css application/javascript;
```

### üì¶ JavaScript Optimization

**Defer non-critical JavaScript**:

```html
<!-- Current -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Optimized (after local build) -->
<script defer src="/assets/js/homepage-animations.js"></script>
```

**Move scroll animation script to external file**:
- Create `/assets/js/scroll-reveal.js`
- Add `defer` attribute
- Reduce HTML size

### üîÑ Jekyll Build Optimization

**_config.yml optimizations**:

```yaml
# Add these for faster builds
incremental: true
liquid:
  error_mode: strict
  strict_filters: true

# Enable compression
sass:
  style: compressed

# Exclude unnecessary files from build
exclude:
  - node_modules/
  - package.json
  - package-lock.json
  - .performance-optimization.md
  - .taskmaster/
```

### üìä Monitoring & Testing

**Core Web Vitals Targets**:
- **LCP** (Largest Contentful Paint): < 2.5s
- **FID** (First Input Delay): < 100ms
- **CLS** (Cumulative Layout Shift): < 0.1

**Testing Tools**:
1. **Lighthouse** (Chrome DevTools): Run audit for performance score
2. **PageSpeed Insights**: https://pagespeed.web.dev/
3. **WebPageTest**: https://www.webpagetest.org/
4. **GTmetrix**: https://gtmetrix.com/

### üé® Font Optimization (Future)

If custom fonts are added:

```html
<!-- Preload critical fonts -->
<link rel="preload" href="/assets/fonts/font.woff2" as="font" type="font/woff2" crossorigin>

<!-- Use font-display: swap -->
@font-face {
  font-family: 'CustomFont';
  src: url('/assets/fonts/font.woff2') format('woff2');
  font-display: swap;
}
```

## Current Performance Baseline

### Before Optimizations
- HTML Size: ~25KB (with inline CSS)
- CSS: ~3.5MB (Tailwind CDN)
- Render-blocking resources: 2 (Tailwind CDN, main.css)

### After Current Optimizations
- HTML Size: ~18KB (CSS extracted)
- CSS: ~3.5MB (Tailwind CDN) + 3KB (animations)
- Lazy-loaded images: All below-fold images
- Resource hints: Configured

### After Production Recommendations
- HTML Size: ~18KB
- CSS: ~25KB (local Tailwind with PurgeCSS)
- Critical CSS: Inlined (~5KB)
- Images: WebP format (25-35% smaller)
- Render-blocking: 0 (all deferred)

**Expected Performance Score Improvements**:
- Lighthouse Performance: 85+ ‚Üí 95+
- LCP: 2.5s ‚Üí 1.2s
- FCP: 1.8s ‚Üí 0.8s
- Total Blocking Time: 150ms ‚Üí 50ms

## Implementation Priority

1. ‚úÖ **Done**: Image lazy loading
2. ‚úÖ **Done**: Extract inline CSS
3. ‚úÖ **Done**: Add resource hints
4. ‚è≥ **Next**: Local Tailwind build with PurgeCSS
5. ‚è≥ **Next**: Convert images to WebP
6. ‚è≥ **Next**: Extract critical CSS
7. ‚è≥ **Next**: Move JS to external files
8. ‚è≥ **Next**: Enable asset compression

## Testing Commands

```bash
# Build Jekyll site
bundle exec jekyll build

# Serve locally
bundle exec jekyll serve

# Test with Lighthouse CLI
npm install -g lighthouse
lighthouse http://localhost:4000 --view

# Check HTML validity
npm install -g html-validator-cli
html-validator --file=_site/index.html
```

## Notes

- GitHub Pages automatically minifies HTML and assets
- Some optimizations require Node.js build tooling
- Test all changes on different devices and connection speeds
- Monitor Core Web Vitals after each optimization
