---
layout: post
author: yunjj92 
categories: java
title: shellscript in Apache-Tomcat
---
<article>
<h4>
	Apache-Tomcat에 특정 프로세스 띄우기
</h4>
<p>
	start schell script<br>
    먼저 apache-tomcat/bin 디렉토리에 start shell을 생성해야 한다. 기본적으로 start shell에 구성해야 하는 환경 변수가 크게 2가지가 있다. 
    하나는 JAVA_HOME, 그리고 하나는 CATALINA이다. 먼저 JAVA_HOME을 설정해서 해당 웹서버에서 사용할  JDK 버전과 해당 JDK 디렉토리를 
    설정한다. 그리고 두번째로, CATALINA_HOME, CATALINA_PID, CATALINA_BASE 환경변수를 설정해야 한다. CATALINA는 톰캣(웹서버)의 서블릿 
    컨테이너로 사용자의 요청을 받으면 해당 요청을 처리할 서블릿 method를 찾아서 호출한다. 기본적인 CATALINA_HOME은 웹서버(톰캣)가 설치된 디렉토리를
    바라본다. CATALINA_BASE는 웹서버 인스턴스의 수행 환경을 세팅한다고 보면된다. 즉 예를 들어 집을 구해서 산다고 하면, 가장 먼저 동네를 지정해야 하는데
    이 살 동네가 CATALINA_HOME이라고 보면 된다. 그리고 CATALINA_BASE 환경변수는 그 동네에서 실질적으로 어떤 집에서 살 것인지를 설정한다고 보면된다. 
    CATALINA_PID는 그 집의 명패라고 보면된다. 그 동네에도 내가 살 집 말고도 여러 집이 있지 않은가.

</p>
<p>
    Tomcat을 구성하는 일련의 요소 <br>
    Tomcat 즉 웹서버를 구성하는 일련의 요소에는 웹 서버 인스턴스, 서블릿 컨테이너, 서블릿이 있다. 웹 서버를 이용해 web application을 구성했을 때
    실질적인 사용자의 요청을 받고, 네트워크 연결을 담당하고, 정적인 파일을 제공하는 역할을 수행하는 것은 웹 서버 인스턴스이다. 즉 웹 서버를 설치하고 
    나서 구체적인 설정들을 마치고 초기화 작업이 완료되면, 웹서버 인스턴스가 전면에 등장한다. 여기서 웹서버 인스턴스는 구체적으로 네트워크 소켓을 구성하고 
    클라이언트의 요청을 기다린다. 웹서버는 자신이 구성해놓은 소켓을 통해서 클라이언트의 요청을 받고, 타겟 url을 결정하기 위해 해당 요청을 parsing한다. 
    그리고 나서 그 요청을 어떻게 처리할지 초기 서버 구성 당시 해놓은 설정을 참고하여 결정한다. 이 과정에서 요청을 처리할 구체적인 프로세스를 수행하기 위해
    해당 요청을 서블릿 컨테이너에게 맡긴다. 서블릿 컨테이너는 해당 요청을 받아들고, 어떤 서블릿 method를 호출해야 할지 결정하여 해당 method를 호출한다. 
    이 때 서블릿 컨테이너는 그 요청을 처리하기 위한 쓰레드를 생성하고 적절한 서블릿을 찾아내서 해당 서블릿의 생성부터 소멸까지 관리한다. 서블릿은 말 그대로 
    요청에 담긴 직접적인 요구사항들을 처리하고 사라진다. CATALINA가 바로 톰캣의 서블릿 컨테이너이다. 

</p>
<pre class="codeblock"></pre>